# Makefile ajustado: compila dentro de latex/
TEXFILE = main
DIR = latex
LATEXINDENT = latexindent

.PHONY: all bib clean view quick

all:
	@echo "üìÑ Compilando LaTeX (fase 1)..."
	@pdflatex -output-directory=$(DIR) $(DIR)/$(TEXFILE).tex

bib:
	@echo "üîÑ Ejecutando Biber..."
	@biber $(DIR)/$(TEXFILE)
	@echo "üìÑ Compilando LaTeX (fase 2)..."
	@pdflatex -output-directory=$(DIR) $(DIR)/$(TEXFILE).tex
	@pdflatex -output-directory=$(DIR) $(DIR)/$(TEXFILE).tex

quick:
	@echo "‚ö° Compilaci√≥n r√°pida sin bibliograf√≠a..."
	@pdflatex -output-directory=$(DIR) $(DIR)/$(TEXFILE).tex

clean:
	@echo "üßπ Limpiando auxiliares..."
	@latexmk -C -output-directory=$(DIR) $(DIR)/$(TEXFILE).tex || true
	@rm -f $(DIR)/*.nlo $(DIR)/*.apc $(DIR)/*.bbl $(DIR)/*.bcf $(DIR)/*.blg $(DIR)/*.aux $(DIR)/*.bak* $(DIR)/*.log $(DIR)/*.toc $(DIR)/*.out $(DIR)/*.fdb_latexmk $(DIR)/*.fls $(DIR)/*.synctex.gz $(DIR)/*.run.xml
	@rm -f $(DIR)/*.bak*

view:
	@open $(DIR)/$(TEXFILE).pdf

format:
	@echo "‚ú® Formateando todos los archivos .tex en $(DIR)/ ..."
	@for file in $(DIR)/*.tex; do \
		echo "Formateando $$file..."; \
		$(LATEXINDENT) -w $$file; \
	done

copy:
	@echo "üìÅ Copiando PDF a la ra√≠z con nuevo nombre..."
	@cp $(DIR)/$(TEXFILE).pdf ./mod_08_miadas_gaston_nina.pdf
